<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>My First Dapp</title>
    <script src="/parity-utils/parity.js"></script>
  </head>
  <body>
    <h1>Hello World!</h1>

    <h3>Your accounts:</h3>
    <pre class="accounts"></pre>

    <h3>Block Stats:</h3>
    <p>
      Current block: <span class="block"></span>
    </p>
    <p>
      Transactions: <span class="txs"></span>
    </p>


    <script>
      const $ = document.querySelector.bind(document);

      parity.api.eth.accounts()
        .then(accounts => {
          $('.accounts').innerHTML = JSON.stringify(accounts, null, 2);
        })
        .catch(alert);

      setInterval(() => {
        parity.api.eth.getBlockByNumber('latest')
          .then(block => {
            $('.block').innerHTML =  block.number;
            $('.txs').innerHTML = JSON.stringify(block.transactions);
          })
          .catch(alert);
      }, 1000);
    </script>
  </body>
</html>
